webpackJsonp([1],{"1PRF":function(t,e){},"9wod":function(t,e){},CMdm:function(t,e){},MA61:function(t,e){},NHnr:function(t,e,i){"use strict";function s(t){i("U/t/")}function a(t){i("MA61")}function n(t){i("YeVA")}function o(t){i("CMdm")}function r(t){i("9wod")}function h(t){i("1PRF")}Object.defineProperty(e,"__esModule",{value:!0});var c=i("7+uW"),l={name:"dialogs",props:{colseable:{type:Boolean,default:!0},open:{type:Boolean,default:!1},height:{type:Number|String}},mounted:function(){var t=this;this.$nextTick(function(){var e=t.$el.querySelector(".dialog-content");t.Over70=e&&e.offsetHeight>70})},data:function(){return{Over70:!1}},methods:{handleClose:function(){this.$emit("closeDialog")}}},d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"my-dialog-hover"},[i("div",{staticClass:"dialog-container"},[t._m(0,!1,!1),t._v(" "),i("div",{staticClass:"dialog-panel"},[i("div",{staticClass:"dialog-content",class:{longText:t.Over70},style:{height:t.height+"rem"}},[i("div",{staticClass:"dialog-title"},[t._t("title")],2),t._v(" "),i("div",{staticClass:"dialog-text"},[t._t("default")],2)]),t._v(" "),i("div",{staticClass:"triangle-right"})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.colseable,expression:"colseable"}],staticClass:"close-btn",on:{click:t.handleClose}},[t._v("×")])])])},g=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"top-box"},[i("div",{staticClass:"triangle-left"})])}],u={render:d,staticRenderFns:g},m=u,p=i("VU/8"),v=s,w=p(l,m,!1,v,null,null),f=w.exports,b={name:"app",components:{myDialog:f}},_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},x=[],y={render:_,staticRenderFns:x},C=y,S=i("VU/8"),P=a,T=S(b,C,!1,P,null,null),k=T.exports,I=i("/ocq"),W=i("mvHQ"),R=i.n(W),U=i("//Fk"),D=i.n(U),A=i("mw3O"),F=i.n(A),M={name:"powerline",props:[],data:function(){return{swingTimer:"",status:0,beforeStatus:0,clientWidth:0,progress:0,PowerIncrease:1,PowerIncreaseSpeed:1.5,PowerDecreaseTime:50,PowerDecreaseStep:.5,PowerDecreaseStepAdd:1,decreaseTimer:"",slowTimer:"",PowerIncreaseFactor:0,btnText:"选择力度",addTip:!1,addFirstTip:!1,handIn:!1,canvas:"",context:"",followerImg:"",directBtn:{x:0,y:0,width:20,height:20,rotate:0,increase:1,increaseSpeed:1,rotateCycle:30}}},computed:{circleDasharray:function(){return Math.round(this.PowerIncreaseFactor*(this.progress+65))+" 1069"}},created:function(){this.clientWidth=window.innerWidth,this.PowerIncreaseFactor=2*Math.PI*(.2*this.clientWidth-20)/100*210/360,this.followerImg=new Image,this.followerImg.src=this.$domain+"/static/images/follower.png"},mounted:function(){var t=this;this.$nextTick(function(){t.init(),t.addFirstTip=!0,t.$nextTick(function(){t.handIn=!0}),setTimeout(function(){t.handIn=!1,setTimeout(function(){t.addFirstTip=!1},300)},2e3),t.$el.querySelector(".power-arrow").style.transformOrigin=.208*window.innerWidth+"px "+.02*window.innerWidth+"px",t.$el.querySelector(".power-arrow").style.WebkitTransformOrigin=.208*window.innerWidth+"px "+.02*window.innerWidth+"px"})},methods:{init:function(){this.swingPower(),this.canvas=document.getElementById("floolwerCanvas"),this.context=this.canvas.getContext("2d"),window.devicePixelRatio?(this.canvas.style.width=this.canvas.width+"px",this.canvas.style.height=this.canvas.height+"px",this.canvas.height=this.canvas.height*window.devicePixelRatio,this.canvas.width=this.canvas.width*window.devicePixelRatio,this.context.scale(window.devicePixelRatio,window.devicePixelRatio)):window.devicePixelRatio=1},swingPower:function(){this.progress=this.progress+this.PowerIncrease*this.PowerIncreaseSpeed,this.progress>=100?(this.PowerIncrease=-1,this.progress=100):this.progress<=0&&(this.PowerIncrease=1,this.progress=0),0===this.status&&(this.swingTimer=window.requestAnimFrame(this.swingPower))},runChooseDirection:function(){3===this.status&&(this.drawDirection(),window.requestAnimFrame(this.runChooseDirection))},drawDirection:function(){var t=this.context,e=this.canvas,i=this.directBtn;this.context.clearRect(0,0,this.canvas.width,this.canvas.height),t.save(),i.rotate=i.rotate+i.increase*i.increaseSpeed,i.rotate>=i.rotateCycle?(i.increase=-1,i.rotate=i.rotateCycle):i.rotate<=-i.rotateCycle&&(i.increase=1,i.rotate=-i.rotateCycle),t.translate(e.width/2/window.devicePixelRatio,.7*e.height/window.devicePixelRatio),t.rotate(i.rotate*Math.PI/180),t.drawImage(this.followerImg,0,0,35,36,-i.width/2,.7*-e.height/window.devicePixelRatio,20,20),t.restore()},shot:function(){var t=this;switch(this.status){case 0:this.status=3,this.addTip=!0,setTimeout(function(){t.addTip=!1,t.btnText="选择方向",t.runChooseDirection()},500);break;case 3:this.status=4,this.addTip=!0,setTimeout(function(){t.addTip=!1,t.$emit("changeRotate",t.directBtn.rotate,t.directBtn.rotateCycle),t.btnText="点击滑行"},500);break;case 4:this.status=1,this.$emit("changeStatus",this.status),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.btnText="劲还在",this.addTip=!0,this.decreasePower(),setTimeout(function(){t.addTip=!1},500)}},decreasePower:function(){clearTimeout(this.decreaseTimer),this.PowerDecreaseStep=Math.min(.15,Math.max(.05,this.PowerDecreaseStep+.02*this.PowerDecreaseStepAdd)),this.progress=this.progress-this.PowerDecreaseStep,this.$emit("returnSpeed",this.progress),this.progress<=0||(this.decreaseTimer=window.requestAnimationFrame(this.decreasePower))},slowPowerDecrease:function(){var t=this;clearTimeout(this.slowTimer),this.PowerDecreaseStepAdd=-1,this.slowTimer=setTimeout(function(){t.PowerDecreaseStepAdd=1},200)},switchOption:function(){if(2===this.status)return this.status=this.beforeStatus,0===this.beforeStatus?this.swingPower():"";this.beforeStatus=this.status,this.status=2},reset:function(){cancelAnimationFrame&&cancelAnimationFrame(this.decreaseTimer),this.status=0,this.btnText="选择力度",this.beforeStatus=0,this.progress=0,this.$emit("returnSpeed",this.progress),this.PowerIncrease=1,this.PowerIncreaseSpeed=1.5,this.PowerDecreaseStep=.5,this.PowerDecreaseStepAdd=1,this.PowerDecreaseTime=50,this.directBtn={x:0,y:0,width:20,height:20,rotate:0,increase:1,increaseSpeed:1,rotateCycle:30},cancelAnimationFrame&&cancelAnimationFrame(this.swingTimer),this.swingPower()}}},$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"powerline"},[i("div",{staticClass:"direction-icon"},[i("canvas",{attrs:{id:"floolwerCanvas",width:.4*t.clientWidth,height:.4*t.clientWidth}})]),t._v(" "),i("div",{staticClass:"outer-cycle"},[i("img",{attrs:{src:t._f("autoPre")("/static/images/outcycle.png")}})]),t._v(" "),i("div",{staticClass:"inner-cycle",on:{click:t.shot}},[i("span",{staticClass:"inner-cycle-icon"}),i("br"),t._v(" "),i("span",{staticClass:"inner-cycle-line"}),i("br"),t._v(" "),i("span",{staticClass:"inner-cycle-text",class:{"animate-text":t.addTip}},[t._v(t._s(t.btnText))])]),t._v(" "),i("svg",{staticClass:"my-svg",attrs:{width:.4*t.clientWidth,height:.4*t.clientWidth}},[i("circle",{attrs:{cx:.2*t.clientWidth,cy:.378*t.clientWidth,r:.2*t.clientWidth-15,"stroke-width":"15",stroke:"#fcfcfc",fill:"none"}}),t._v(" "),i("circle",{staticClass:"inner-svg",attrs:{cx:.2*t.clientWidth,cy:.378*t.clientWidth,r:.2*t.clientWidth-15,"stroke-width":"15",stroke:"#fed744",fill:"none","stroke-dasharray":t.circleDasharray}})]),t._v(" "),i("div",{staticClass:"power-arrow",style:{transform:"rotate("+this.progress/100*200+"deg) translateY(50%)","-webkit-transform":"rotate("+this.progress/100*200+"deg) translateY(50%)"}},[i("img",{attrs:{src:t._f("autoPre")("/static/images/power-btn.png")}})]),t._v(" "),t.addFirstTip?i("div",{staticClass:"click-tip"},[i("transition",{attrs:{name:"right-in"}},[t.handIn?i("img",{staticClass:"click-tip-finger",attrs:{src:t._f("autoPre")("/static/images/finger.png")}}):t._e()]),t._v(" "),i("div",{staticClass:"w1"}),t._v(" "),i("div",{staticClass:"w2"}),t._v(" "),i("div",{staticClass:"w3"})],1):t._e()])},N=[],L={render:$,staticRenderFns:N},z=L,H=i("VU/8"),E=n,B=H(M,z,!1,E,null,null),O=B.exports,q=i("Zrlr"),X=i.n(q),j=i("wxAW"),G=i.n(j),Y=function(){function t(e,i){X()(this,t),this.circles=[],this.max_radius="",this.context="",this.canvas="",this.circleOffsetX="left"===i?-6:8,this.circleOffsetY=-10,this.init(e)}return G()(t,[{key:"init",value:function(t){var e=this;1!==t.nodeType&&(t=document.querySelector(t));var i=document.createElement("canvas");this.canvas=i,this.context=i.getContext("2d"),i.width=t.offsetWidth,i.height=t.offsetHeight+10,window.devicePixelRatio&&(this.canvas.style.width=i.width+"px",this.canvas.style.height=i.height+"px",this.canvas.height=i.height*window.devicePixelRatio,this.canvas.width=i.width*window.devicePixelRatio,this.context.scale(window.devicePixelRatio,window.devicePixelRatio)),t.appendChild(i),t.addEventListener("click",function(t){var i=t.target||t.srcElement;"CANVAS"===i.tagName&&e.press(i)})}},{key:"press",value:function(t){this.max_radius=t.offsetWidth;var e={radius:0,centerX:t.offsetWidth/2+this.circleOffsetX,centerY:t.offsetHeight/2+this.circleOffsetY};this.circles.push(e),this.circles.length<=1&&this.draw()}},{key:"draw",value:function(){var t=this,e=this.context;e.clearRect(0,0,this.canvas.width,this.canvas.height);for(var i=this.circles.length;i--;){var s=this.circles[i];e.beginPath(),e.arc(s.centerX,s.centerY,s.radius,0,2*Math.PI,!1),e.strokeStyle="rgba(255, 255, 255, "+(100-s.radius/3*10)/100+")",e.lineWidth=2,e.stroke(),s.radius+=1,s.radius>30&&this.circles.splice(i,1)}this.circles.length>0?window.requestAnimFrame(function(){t.draw()}):e.clearRect(0,0,this.canvas.width,this.canvas.height)}}]),t}(),V=Y,J={name:"btns",props:{side:{type:String,default:"left"}},mounted:function(){var t=this;this.$nextTick(function(){new V(t.$el,t.side)})},data:function(){return{}},methods:{}},Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"option-btn",class:t.side,on:{click:function(e){t.$emit("click")}}},[i("span",{staticClass:"option-btn-text"},[t._t("default")],2)])},K=[],Z={render:Q,staticRenderFns:K},tt=Z,et=i("VU/8"),it=o,st=et(J,tt,!1,it,null,null),at=st.exports,nt=function(){function t(){X()(this,t),this.radius=50,this.R=70,this.begin=Math.min(window.innerHeight,667)-window.innerWidth/2.5-20,this.posx=window.innerWidth/2,this.posy=this.begin,this.horSpeed=0,this.horAccSpeed=0,this.stop=!1,this.follower={}}return G()(t,[{key:"getFollowerPos",value:function(t,e){var i=Math.max(.5,e),s=Math.sqrt(t*t+i*i),a=i*this.R/s,n=t*this.R/s,o=i*(this.R+10)/s,r=t*(this.R+10)/s,h=this.posx-n,c=this.posy+a,l=this.posx-r,d=this.posy+o,g=function(t){return(h-l)/(d-c)*t+d-(h-l)/(d-c)*l};return{x:h,y:c,x1:l-5,y1:g(l-5),x2:l+5,y2:g(l+5)}}},{key:"reset",value:function(){this.posx=window.innerWidth/2,this.posy=this.begin,this.stop=!0,this.horSpeed=0,this.horAccSpeed=0,this.follower={}}}]),t}(),ot=nt,rt=function(){function t(){X()(this,t),this.dir="",this.margin=60,this.width=70,this.height=this.width/2.25,this.posX=window.innerWidth/2-this.margin,this.decreaseFactor=-1,this.count=0,this.show=!1}return G()(t,[{key:"addCount",value:function(t){this.dir!==t&&(this.dir=t,this.count=0,this.posX="left"===this.dir?window.innerWidth/2-this.margin:window.innerWidth/2+this.margin,this.decreaseFactor=-1),this.count++}},{key:"updateSelf",value:function(){this.count?(this.show=!0,this.posX=this.posX+8*this.decreaseFactor,"left"===this.dir&&this.posX<window.innerWidth/2-this.margin-this.width/2?this.decreaseFactor=1:"left"===this.dir&&this.posX>window.innerWidth/2-this.margin+this.width/2?(this.decreaseFactor=-1,this.count--):"right"===this.dir&&this.posX<window.innerWidth/2+this.margin-this.width/2?this.decreaseFactor=1:"right"===this.dir&&this.posX>window.innerWidth/2+this.margin+this.width/2&&(this.decreaseFactor=-1,this.count--)):(this.show=!1,this.dir="")}}]),t}(),ht=rt,ct=function(){function t(){X()(this,t),this.radio=5.87,this.width=70,this.height=this.width*this.radio,this.posArr=[{x:0,y:-this.height},{x:0,y:0},{x:0,y:this.height}],this.posArr2=[{x:0,y:-this.height},{x:0,y:0},{x:0,y:this.height}]}return G()(t,[{key:"updateSelf",value:function(){}}]),t}(),lt=ct,dt=i("GQaK"),gt=i("mtWM"),ut=i.n(gt),mt="",pt="",vt=!1,wt={cheer:"",fail:"",brush:""},ft={name:"world",components:{powerLine:O,optionBtn:at,myDialog:f},data:function(){return{numX:0,lineHeight:0,points:0,renderTimer:0,hasBrush:0,beginMove:"",domain:"",topestDistance:-630,topest:-630,score:0,computedScoreTimer:"",binghu:"",brush:"",bgWalk:0,roadWidth:100,speed:0,speedFactor:33,rate:33,ratio:"",status:0,context:"",contextStatic:"",canvas:"",boxX:0,boxY:0,Width:"",Height:"",image:"",peopleImg1:"",peopleImg2:"",brushImage:"",meter:"",showTextEffect:"",showRanking:!1,pullup:!0,listenScroll:!0,pulldown:!0,scroll:null,beforeScroll:!0,data:[{Sort:1,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"xxx",Integral:199},{Sort:2,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"yyy",Integral:198},{Sort:3,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"zzz",Integral:197},{Sort:4,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"www",Integral:196},{Sort:5,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"ttt",Integral:195},{Sort:6,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"xxx",Integral:199},{Sort:7,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"yyy",Integral:198},{Sort:8,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"zzz",Integral:197},{Sort:9,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"www",Integral:196},{Sort:10,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"ttt",Integral:195},{Sort:11,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"xxx",Integral:199},{Sort:12,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"yyy",Integral:198},{Sort:13,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"zzz",Integral:197},{Sort:14,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"www",Integral:196},{Sort:15,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"ttt",Integral:195},{Sort:16,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"xxx",Integral:199},{Sort:17,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"yyy",Integral:198},{Sort:18,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"zzz",Integral:197},{Sort:19,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"www",Integral:196},{Sort:20,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"ttt",Integral:195},{Sort:21,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"ttt",Integral:195},{Sort:22,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"ttt",Integral:195},{Sort:23,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"ttt",Integral:195},{Sort:24,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"ttt",Integral:195},{Sort:25,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"ttt",Integral:195},{Sort:26,UserLogo:"/binghutiaozhan/static/images/binghu.png",UserName:"ttt",Integral:195}],msgText:"",msgTip:!1,showResult:!1,showPoints:!1,showTotalPoints:!1,success:!1,baseinfo:{points:0,hasGetPoint:!1},rankData:[]}},watch:{showRanking:function(t){var e=this;t&&(this.scroll=new dt.a(this.$refs.wrapper,{}),this.pullup&&this.scroll.on("scrollEnd",function(){e.scroll.y,e.scroll.maxScrollY}))}},created:function(){this.binghu=new ot,this.brush=new ht,this.image=new Image,this.people=new lt,this.peopleImg1=new Image,this.peopleImg2=new Image,this.brushImage=new Image,this.meter=new Image,this.finalAD=new Image,this.fetchData(),this.image.src=this.$domain+"/static/images/binghu.png",this.brushImage.src=this.$domain+"/static/images/brush.png",this.peopleImg1.src=this.$domain+"/static/images/people2.jpg",this.peopleImg2.src=this.$domain+"/static/images/people.jpg",this.meter.src=this.$domain+"/static/images/newMeter.jpg",this.finalAD.src=this.$domain+"/static/images/bg-ad.png",this.createAudio()},methods:{fetchData:function(){var t=this;ut.a.post("/Index/SystemStatue").then(function(e){var i=e.data;if(1!==i.Code)return D.a.reject(i);var s=i.Data;t.baseinfo={points:s.GetedIntegral||0,hasGetPoint:!!s.UserStatue},t.rankData=s.RankingList}).catch(function(t){console.log(t)}),console.log("fetching data...")},pushScore:function(t){var e=this,i=F.a.stringify({Distance:t});ut.a.post("/Index/SaveUserInfo",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){var i=t.data;if(1!==i.Code)return D.a.reject(i);var s=i.Data;if(!s.Statue)return D.a.reject(new Error({msg:s.Msg}));e.baseinfo.hasGetPoint||!s.IsGetIntegral?(e.points=0,e.baseinfo.points=s.GetedIntegral||0,e.showTotalPoints=!0):(e.points=s.GetedIntegral,e.showResult=!1,e.showPoints=!0,e.addScore(s.activityId,s.UserId,e.points))}).catch(function(t){e.msgText=t.msg||"未知错误",e.msgTip=!0,e.reStart()})},addScore:function(t,e,i){var s=this;window.callbackFn=function(t){"fail"===R()(t).status&&(s.msgText="游戏积分保存失败",s.msgTip=!0)};var a=document.createElement("script");a.src="http://www.ecp-pm.com/gameInfo/savescore.dhtml?userId="+e+"&score="+i+"&activityId="+t+"&call=callbackFn",document.body.appendChild(a)},closeShowPoint:function(){this.msgTip=!1,this.showPoints=!1,this.showTotalPoints=!1,this.reStart()},run:function(){2!==this.status&&(this.render(),this.renderTimer=window.requestAnimFrame(this.run))},createAudio:function(){for(var t in wt)wt[t]=document.createElement("AUDIO"),wt[t].src=this.$domain+"/static/audio/"+t+".mp3",wt[t].preload=!0},getSoundAndFadeAudio:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t&&(clearInterval(mt),setTimeout(function(){var i=Math.round(t.duration-e);mt=setInterval(function(){t.currentTime>=i&&0!==t.volume&&(t.volume=Math.max(t.volume-.1,0)),(t.volume<=0||t.currentTime>=t.duration)&&clearInterval(mt)},200)},100))},render:function(){this.context.clearRect(this.boxX,this.boxY,this.Width,this.Height),this.rate=Math.round(10*this.speed/this.speedFactor)/10,this.drawBg(),this.drawFinal(),this.drawPeople(),this.drawHero(),this.drawBrush(),this.context.save(),this.context.restore(),this.judge()},computedScore:function(){var t=this;this.computedScoreTimer=setTimeout(function(){t.score=(Math.abs(t.beginMove-t.topestDistance-t.bgWalk)/t.ratio).toFixed(3),t.computedScore()},250)},cancelComputedScore:function(){clearTimeout(this.computedScoreTimer)},shot:function(t){this.status||(this.status=t,this.binghu.stop=!1,this.fireTextTip("go"))},drawStatic:function(){var t=this.contextStatic;t.beginPath(),t.strokeStyle="#ccc",t.lineWidth=20,t.moveTo(this.people.width+10,0),t.lineTo(this.people.width+10,this.Height),t.moveTo(this.Width-this.people.width-10,0),t.lineTo(this.Width-this.people.width-10,this.Height),t.stroke(),t.beginPath(),t.strokeStyle="#eee",t.lineWidth=10,t.moveTo(this.people.width+20+5,0),t.lineTo(this.people.width+20+5,this.Height),t.moveTo(this.Width-this.people.width-20-5,0),t.lineTo(this.Width-this.people.width-20-5,this.Height),t.stroke()},drawBrush:function(){var t=this.brush;if(t.updateSelf(),this.brush.show){this.context.drawImage(this.brushImage,0,0,146,50,t.posX-t.width/2,300,t.width,t.height)}},drawFinal:function(){var t=this.context;this.binghu.stop&&(this.topest=this.topest+this.rate),t.beginPath(),t.strokeStyle="#f1db8d",t.fillStyle="#fff",t.lineWidth=10,t.arc(this.Width/2,this.topest,70,0,2*Math.PI),t.stroke(),t.fill(),t.beginPath(),t.strokeStyle="#84d0fd",t.arc(this.Width/2,this.topest,40,0,2*Math.PI),t.stroke(),t.beginPath(),t.fillStyle="#d63338",t.arc(this.Width/2,this.topest,10,0,2*Math.PI),t.fill(),t.drawImage(this.finalAD,0,0,296,150,this.Width/2-80,this.topest-300,160,80)},drawPeople:function(){var t=this,e=this.context,i=this.people;i.posArr.forEach(function(s,a){t.binghu.stop&&(s.y=s.y+t.rate),s.y>=t.Height&&(s.y=-i.height-(t.Height-i.height)),e.drawImage(t.peopleImg1,0,0,141,828,s.x,s.y,i.width,i.height),e.drawImage(t.peopleImg2,0,0,141,828,t.Width-i.width,s.y,i.width,i.height)})},drawHero:function(){var t=this.context,e=this.binghu;if(this.binghu.stop||(this.binghu.posy=-this.rate+this.binghu.posy,this.binghu.posy<this.beginMove&&(this.binghu.stop=!0)),this.status){this.binghu.horSpeed=this.binghu.horSpeed+this.binghu.horAccSpeed,this.binghu.horSpeed=this.binghu.horSpeed>.5?.5:this.binghu.horSpeed<-.5?-.5:this.binghu.horSpeed,this.binghu.posx=this.binghu.posx+this.binghu.horSpeed;var i=this.binghu.getFollowerPos(this.binghu.horSpeed,this.rate);t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.fillStyle="#d35155",t.fill()}t.drawImage(this.image,0,0,162,160,e.posx-e.R/1.5,e.posy-e.R/1.5,2*e.R/1.5,2*e.R/1.5)},drawBg:function(){this.binghu.stop&&(this.bgWalk=Math.round(10*(this.rate+this.bgWalk))/10);var t=this.context;t.save(),t.fillStyle="#999",t.font="bold 14px sans-serif",t.scale(.7,.8),t.fillText("2m",this.numX+49,(this.topestDistance+this.bgWalk+2*this.lineHeight-20)/.8),t.restore(),t.drawImage(this.meter,0,0,334,1470,this.numX,this.topestDistance+this.bgWalk+2*this.lineHeight,2*this.roadWidth-42,this.roadImgHeight)},judge:function(){1===this.status&&this.speed<=0&&this.gameOver(),Math.abs(this.Width-2*this.binghu.posx)>this.roadWidth&&this.gameOver()},gameOver:function(){this.status=2,this.cancelComputedScore(),this.score=(Math.abs(this.beginMove-this.topestDistance-this.bgWalk)/this.ratio).toFixed(3),this.score>=5?(this.success=!1,this.showResult=!0,wt.brush.pause(),wt.fail.currentTime=0,wt.fail&&wt.fail.play()):(this.success=!0,this.showResult=!0,wt.brush.pause(),wt.cheer.currentTime=0,wt.cheer.volume=1,wt.cheer&&wt.cheer.play(),this.getSoundAndFadeAudio(wt.cheer,2))},reStart:function(){this.cancelComputedScore(),this.hasBrush=0,this.speed=0,this.binghu.reset(),this.status=0,this.bgWalk=0,this.topest=this.topestDistance,this.$refs.powerLine.reset(),cancelAnimationFrame&&cancelAnimationFrame(this.renderTimer),this.run(),this.computedScore()},handleDirect:function(t){1===this.status&&(5===this.hasBrush&&this.fireTextTip("moreSmooth"),this.hasBrush<=5&&this.hasBrush++,this.$refs.powerLine.slowPowerDecrease(),this.binghu.horAccSpeed=t?"left"===t?-.05:.05:0,this.brush.addCount(t),clearTimeout(pt),vt||(wt.brush.currentTime=.5,wt.brush.play(),vt=!0,pt=setTimeout(function(){wt.brush.pause(),vt=!1},200),setTimeout(function(){vt=!1},200)))},getRotate:function(t,e){this.binghu.horSpeed=t/e*.5},getJourney:function(t){1===this.status&&(this.speed=t)},fireTextTip:function(t){var e=this;this.showTextEffect=t,setTimeout(function(){e.showTextEffect=!1},500)},openRanking:function(){1!==this.status&&(this.showRanking=!0)},handleBtnClick:function(t){"points"===t&&(this.showResult=!1,this.pushScore(this.score)),"continue"===t&&(this.showResult=!1,this.showPoints=!1,this.reStart())}},mounted:function(){var t=this;this.$nextTick(function(){t.Width=window.innerWidth,t.Height=Math.min(window.innerHeight,667),t.beginMove=2/3*t.Height,t.numX=Math.round((t.Width-t.roadWidth)/2-28),t.lineHeight=Math.round((t.beginMove-t.topestDistance)/25),t.roadImgHeight=Math.round(t.beginMove-t.topestDistance-6*t.lineHeight),t.ratio=(t.beginMove-t.topestDistance)/50;var e='<canvas id="canvas" width='+t.Width+"; height="+t.Height+">Sorry! you的浏览器不支持canvas</canvas>",i='<canvas id="canvasStatic" width='+t.Width+"; height="+t.Height+">Sorry! you的浏览器不支持canvas</canvas>";document.getElementById("stage").innerHTML=i+e,t.canvas=document.getElementById("canvas"),t.context=t.canvas.getContext("2d"),t.contextStatic=document.getElementById("canvasStatic").getContext("2d"),window.devicePixelRatio&&(t.canvas.style.width=t.Width+"px",t.canvas.style.height=t.Height+"px",t.canvas.height=t.Height*window.devicePixelRatio,t.canvas.width=t.Width*window.devicePixelRatio,t.context.scale(window.devicePixelRatio,window.devicePixelRatio)),t.run(),t.drawStatic(),t.computedScore(),wt.cheer&&(wt.cheer.currentTime=0,wt.cheer.play()),t.getSoundAndFadeAudio(wt.cheer,2)})},destroy:function(){this.scroll=null}},bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{attrs:{id:"stage"}}),t._v(" "),i("div",{staticClass:"score-panel"},[i("div",{staticClass:"score-box"},[i("div",{staticClass:"box-item",staticStyle:{"border-bottom":"1px solid #ccc"}},[t._v("离靶心距离")]),t._v(" "),i("div",{staticClass:"box-item num",staticStyle:{"line-height":"1.2",padding:"0 0.8rem"}},[t._v(t._s(t.score)+"\n        "),i("div",{staticStyle:{"text-align":"right"}},[t._v("m")])])]),t._v(" "),i("div",{staticClass:"ranking",on:{click:t.openRanking}},[t._v("排行榜")])]),t._v(" "),i("power-line",{ref:"powerLine",on:{returnSpeed:t.getJourney,changeStatus:t.shot,changeRotate:t.getRotate}}),t._v(" "),i("option-btn",{on:{click:function(e){t.handleDirect("left")}}},[t._v("左扫冰")]),t._v(" "),i("option-btn",{attrs:{side:"right"},on:{click:function(e){t.handleDirect("right")}}},[t._v("右扫冰")]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:"go"===t.showTextEffect,expression:"showTextEffect === 'go'"}],staticClass:"text-effect"},[t._v("\n      GO!\n    ")])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:"moreSmooth"===t.showTextEffect,expression:"showTextEffect === 'moreSmooth'"}],staticClass:"text-effect-img"},[i("img",{attrs:{src:t._f("autoPre")("/static/images/moreSmooth.png")}})])]),t._v(" "),i("my-dialog",{staticClass:"dialog rankings",attrs:{height:"26.5",open:t.showRanking},on:{closeDialog:function(e){t.showRanking=!1}}},[i("img",{attrs:{slot:"title",src:t._f("autoPre")("/static/images/rank.png")},slot:"title"}),t._v(" "),i("div",{staticClass:"ranking-section rank-head"},[i("div",{staticClass:"name"},[t._v("用户昵称")]),t._v(" "),i("div",{staticClass:"score",staticStyle:{"text-align":"right"}},[t._v("分数")])]),t._v(" "),i("div",{ref:"wrapper",staticClass:"wrapper",on:{scrollToEnd:t.fetchData}},[i("ul",{staticClass:"content"},t._l(t.rankData,function(e){return i("li",{key:e.Sort},[i("div",{staticClass:"ranking-section"},[i("span",{staticClass:"rank"},[t._v(t._s(e.Sort))]),t._v(" "),i("img",{staticClass:"avatar",attrs:{src:e.UserLogo}}),t._v(" "),i("span",{staticClass:"name"},[t._v(t._s(e.UserName))]),t._v(" "),i("span",{staticClass:"score"},[t._v(t._s(e.Integral))])])])})),t._v(" "),i("div",{staticClass:"loading-wrapper"})]),t._v(" "),i("div",{staticClass:"ranking-more"},[t._v("向上拉动查看更多排名")])]),t._v(" "),i("my-dialog",{staticClass:"dialog points",staticStyle:{"text-align":"left"},attrs:{height:"16",open:t.showPoints},on:{closeDialog:t.closeShowPoint}},[i("img",{attrs:{slot:"title",src:t._f("autoPre")("/static/images/victory.png")},slot:"title"}),t._v(" "),i("div",{staticClass:"results-content",staticStyle:{padding:"0"}},[i("p",{staticClass:"notice"},[t._v("获得"),i("span",{staticClass:"num"},[t._v(t._s(t.points)+"分")])]),t._v(" "),i("p",{staticClass:"slogan"},[t._v("万宝路新红万产品全新升级")]),t._v(" "),i("ul",{staticClass:"attrs"},[i("li",[t._v("口味特点：")]),t._v(" "),i("li",[t._v("富在内 融于味")]),t._v(" "),i("li",[t._v("经典美式混合烟，口味进一步提升")]),t._v(" "),i("li",[t._v("劲还在，口感更顺")]),t._v(" "),i("li",[t._v("焦油含量降至10毫克")])]),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("span",{staticClass:"results-btn",on:{click:function(e){t.handleBtnClick("continue")}}},[t._v("再次挑战")])])])]),t._v(" "),i("my-dialog",{staticClass:"dialog points",staticStyle:{"text-align":"left"},attrs:{height:"5",open:t.showTotalPoints},on:{closeDialog:t.closeShowPoint}},[i("img",{attrs:{slot:"title",src:t._f("autoPre")("/static/images/victory.png")},slot:"title"}),t._v(" "),i("div",{staticClass:"results-content",staticStyle:{padding:"0"}},[i("p",{staticClass:"tip"},[t._v("总积分达到了"),i("span",{staticClass:"num"},[t._v(t._s(t.baseinfo.points))]),t._v("分")]),t._v(" "),i("p",{staticClass:"tip"},[t._v("每天只能有一次获得积分的机会,请明天再来吧")])])]),t._v(" "),i("my-dialog",{staticClass:"dialog",attrs:{height:"1",open:t.msgTip},on:{closeDialog:t.closeShowPoint}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v("出错了···")]),t._v(" "),i("div",{},[i("p",{staticClass:"tip"},[i("b",[t._v("错误信息："+t._s(t.msgText))])]),t._v(" "),i("p",{staticClass:"tip"},[t._v("抱歉，当前网络似乎出现意外状况，请尝试刷新页面")])])]),t._v(" "),i("my-dialog",{staticClass:"dialog results",attrs:{colseable:!1,height:t.success?21:16,open:t.showResult},on:{closeDialog:function(e){t.showResult=!1}}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.success,expression:"success"}],attrs:{slot:"title",src:t._f("autoPre")("/static/images/victory.png")},slot:"title"}),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:!t.success,expression:"!success"}],attrs:{slot:"title",src:t._f("autoPre")("/static/images/failed.png")},slot:"title"}),t._v(" "),i("div",{staticClass:"results-content",staticStyle:{padding:"0"}},[i("p",{staticClass:"notice"},[t._v("你距离靶心"),i("br"),t._v(" "),i("span",{staticClass:"num"},[t._v(t._s(this.score))]),t._v("M")]),t._v(" "),i("p",{staticClass:"slogan"},[t._v("万宝路新红万产品全新升级")]),t._v(" "),i("ul",{staticClass:"attrs"},[i("li",[t._v("口味特点：")]),t._v(" "),i("li",[t._v("富在内 融于味")]),t._v(" "),i("li",[t._v("经典美式混合烟，口味进一步提升")]),t._v(" "),i("li",[t._v("劲还在，口感更顺")]),t._v(" "),i("li",[t._v("焦油含量降至10毫克")])]),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.success,expression:"success"}],staticClass:"results-btn",on:{click:function(e){t.handleBtnClick("points")}}},[t._v("\n            已了解，立刻抽积分\n          ")]),t._v(" "),i("span",{staticClass:"results-btn",on:{click:function(e){t.handleBtnClick("continue")}}},[t._v("再次挑战")])])])])],1)},_t=[],xt={render:bt,staticRenderFns:_t},yt=xt,Ct=i("VU/8"),St=r,Pt=Ct(ft,yt,!1,St,null,null),Tt=Pt.exports,kt={name:"app",components:{myDialog:f},data:function(){return{loading:!1,afterLoadNum:0,circleDasharray:0,curProgress:0,progress:0,notLoadImgCount:0,imgToalCount:0,hasCheck:!1,seeRule:!1,seeProtocol:!1}},created:function(){this.preLoad(),this.hasCheck=!!(localStorage.getItem("hasCheck")-0)},mounted:function(){var t=this;this.$nextTick(function(){t.transionTarget()})},beforeRouteLeave:function(t,e,i){var s=this,a=0;!function t(){s.afterLoadNum>0&&a<10?(a++,s.loading=!0,setTimeout(t,100)):(s.loading=!1,i())}()},watch:{notLoadImgCount:function(){this.progress=100-Math.round(this.notLoadImgCount/this.imgToalCount*100)}},methods:{transionTarget:function(){var t=this;if(this.curProgress>=100)return void this.afterLoad();var e=this.curProgress<this.progress?5:30;this.curProgress<Math.max(30,this.progress)?this.curProgress++:this.curProgress=Math.max(30,this.progress),this.circleDasharray=Math.round(this.curProgress/100*2*Math.PI*20)+" 1069",setTimeout(function(){t.transionTarget()},e)},setHasCheck:function(){localStorage.setItem("hasCheck",this.hasCheck?1:0)},startGame:function(){if(!this.hasCheck)return void alert("请先阅读游戏声明");this.$router.push({name:"word"})},preLoad:function(){var t=this,e=[this.$domain+"/static/images/logo.png",this.$domain+"/static/images/rule.png",this.$domain+"/static/images/homeBg.png",this.$domain+"/static/images/game_rule.png",this.$domain+"/static/images/shengming.png",this.$domain+"/static/images/btn.png"];this.imgToalCount=e.length,this.notLoadImgCount=e.length,e.forEach(function(e){var i=new Image;i.src=e,i.onload=function(){t.notLoadImgCount--},i.onerror=function(){t.notLoadImgCount--}})},afterLoad:function(){var t=this,e=[this.$domain+"/static/images/binghu.png",this.$domain+"/static/images/brush.png",this.$domain+"/static/images/people.jpg",this.$domain+"/static/images/people2.jpg",this.$domain+"/static/images/follower.png",this.$domain+"/static/images/btn-bg.png",this.$domain+"/static/images/moreSmooth.png",this.$domain+"/static/images/rank.png",this.$domain+"/static/images/victory.png",this.$domain+"/static/images/failed.png",this.$domain+"/static/images/newMeter.png",this.$domain+"/static/images/bg-ad.png",this.$domain+"/static/images/finger.png"];this.afterLoadNum=e.length,e.forEach(function(e){var i=new Image;i.src=e,i.onload=function(){t.afterLoadNum--},i.onerror=function(){t.afterLoadNum--}})}}},It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"start-page"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading"},[i("svg",{staticClass:"loading-cycle",staticStyle:{"margin-top":"-3rem"},attrs:{width:"80",height:"30",viewBox:"0 0 120 30",fill:"#d35155"}},[i("circle",{attrs:{cx:"15",cy:"15",r:"13.748"}},[i("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),t._v(" "),i("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})]),t._v(" "),i("circle",{attrs:{cx:"60",cy:"15",r:"10.252","fill-opacity":"0.3"}},[i("animate",{attrs:{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}}),t._v(" "),i("animate",{attrs:{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"}})]),t._v(" "),i("circle",{attrs:{cx:"105",cy:"15",r:"13.748"}},[i("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),t._v(" "),i("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.curProgress<100,expression:"curProgress < 100"}],staticClass:"loading"},[i("div",{staticClass:"loading-cycle"},[i("svg",{staticClass:"loading-svg",attrs:{width:60,height:60}},[i("circle",{attrs:{cx:30,cy:30,r:20,"stroke-width":"10",stroke:"#fed744",fill:"none"}}),t._v(" "),i("circle",{attrs:{cx:30,cy:30,r:20,"stroke-width":"10",stroke:"#d35155",fill:"none","stroke-dasharray":t.circleDasharray}})]),t._v(" "),i("br"),t._v("\n      "+t._s(t.curProgress)+"%\n    ")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.curProgress>=100,expression:"curProgress >= 100"}]},[i("div",{staticClass:"logo"},[i("img",{attrs:{src:t._f("autoPre")("/static/images/logo.png")}})]),t._v(" "),i("div",{staticClass:"game-rule",on:{click:function(e){t.seeRule=!0}}},[i("img",{attrs:{src:t._f("autoPre")("/static/images/rule.png")}})]),t._v(" "),i("div",{staticClass:"bg-box"},[i("img",{staticClass:"img-bg",attrs:{src:t._f("autoPre")("/static/images/homeBg.png")}})]),t._v(" "),i("div",{staticClass:"btn-field"},[i("span",{staticClass:"start-btn",on:{click:t.startGame}},[i("img",{attrs:{src:t._f("autoPre")("/static/images/btn.png")}})])]),t._v(" "),i("div",{staticClass:"game-protocol"},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.hasCheck,expression:"hasCheck"}],staticClass:"game-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.hasCheck)?t._i(t.hasCheck,null)>-1:t.hasCheck},on:{change:[function(e){var i=t.hasCheck,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n=t._i(i,null);s.checked?n<0&&(t.hasCheck=i.concat([null])):n>-1&&(t.hasCheck=i.slice(0,n).concat(i.slice(n+1)))}else t.hasCheck=a},t.setHasCheck]}}),t._v(" "),i("span",{staticClass:"checkbox-select"},[t._v(t._s(t.hasCheck?"✓":""))])]),t._v(" "),i("span",{staticClass:"game-protocol-btn",on:{click:function(e){t.seeProtocol=!0}}},[t._v("查看游戏声明")])])]),t._v(" "),i("my-dialog",{attrs:{open:t.seeRule,height:"15"},on:{closeDialog:function(e){t.seeRule=!1}}},[i("img",{attrs:{slot:"title",src:t._f("autoPre")("/static/images/game_rule.png")},slot:"title"}),t._v(" "),i("div",{},[t._v("\n      1. 力度条不断变化，点击确定力度"),i("br"),t._v("\n      2. 方向不断变化，点击确定方向"),i("br"),t._v("\n      3. 力度为零，游戏结束"),i("br"),t._v("\n      3. 冰壶接触滑道两边，游戏结束"),i("br"),t._v("\n      4. 成绩小于10m可抽取积分"),i("br"),t._v("\n      1. 力度条不断变化，点击确定力度"),i("br"),t._v("\n      2. 方向不断变化，点击确定方向"),i("br"),t._v("\n      3. 力度为零，游戏结束"),i("br"),t._v("\n      3. 冰壶接触滑道两边，游戏结束"),i("br"),t._v("\n      4. 成绩小于10m可抽取积分"),i("br"),t._v("\n      5. 玩家凭借积分可····\n    ")])]),t._v(" "),i("my-dialog",{attrs:{open:t.seeProtocol,height:"2"},on:{closeDialog:function(e){t.seeProtocol=!1}}},[i("img",{attrs:{slot:"title",src:t._f("autoPre")("/static/images/shengming.png")},slot:"title"}),t._v(" "),i("div",{},[t._v("\n        1. 本次积分只在活动期间有效"),i("br"),t._v("\n        2. 本次积分只在活动期间有效"),i("br"),t._v("\n        3. 本次积分只在活动期间有效"),i("br"),t._v("\n        4. 活动方保留最终解释权\n      ")])])],1)},Wt=[],Rt={render:It,staticRenderFns:Wt},Ut=Rt,Dt=i("VU/8"),At=h,Ft=Dt(kt,Ut,!1,At,null,null),Mt=Ft.exports;c.a.use(I.a);var $t=new I.a({routes:[{path:"/",name:"start",component:Mt},{path:"/word",name:"word",component:Tt}]});Date.now||(Date.now=function(){return(new Date).getTime()}),function(){for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var i=t[e];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var s=0;window.requestAnimationFrame=function(t){var e=Date.now(),i=Math.max(s+16,e);return setTimeout(function(){t(s=i)},i-e)},window.cancelAnimationFrame=clearTimeout}}(),window.requestAnimFrame=window.requestAnimationFrame,function(t,e){var i=t.documentElement,s="onorientationchange"in window?"orientationchange":"resize",a=function(){var t=i.clientWidth;t&&(i.style.fontSize=t/320*10+"px")};e.addEventListener(s,a,!1),t.addEventListener("DOMContentLoaded",a,!1)}(document,window),c.a.config.productionTip=!1,c.a.prototype.$domain=location.port.indexOf("8888")<0?"/binghutiaozhan":"",c.a.filter("autoPre",function(t){return location.port.indexOf("8888")<0?"/binghutiaozhan"+t:t}),new c.a({el:"#app",router:$t,template:"<App/>",components:{App:k}})},"U/t/":function(t,e){},YeVA:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.9c7b01080aaf9a55a364.js.map