webpackJsonp([1],{"5ftQ":function(t,e){},Mp1g:function(t,e){},NHnr:function(t,e,i){"use strict";function s(t){i("5ftQ")}function n(t){i("Mp1g")}function o(t){i("V1jW")}function h(t){i("sI4q")}function a(t){i("OSBH")}function r(t){i("TnH1")}Object.defineProperty(e,"__esModule",{value:!0});var c=i("7+uW"),d={name:"dialogs",props:["open","height"],mounted:function(){var t=this;this.$nextTick(function(){var e=t.$el.querySelector(".dialog-content");t.Over70=e&&e.offsetHeight>70})},data:function(){return{Over70:!1}},methods:{handleClose:function(){this.$emit("closeDialog")}}},l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"my-dialog-hover"},[i("div",{staticClass:"dialog-container"},[t._m(0,!1,!1),t._v(" "),i("div",{staticClass:"dialog-panel"},[i("div",{staticClass:"dialog-content",class:{longText:t.Over70},style:{height:t.height+"rem"}},[i("div",{staticClass:"dialog-title"},[t._t("title")],2),t._v(" "),i("div",{staticClass:"dialog-text"},[t._t("default")],2)]),t._v(" "),i("div",{staticClass:"triangle-right"})]),t._v(" "),i("div",{staticClass:"close-btn",on:{click:t.handleClose}},[t._v("×")])])])},u=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"top-box"},[i("div",{staticClass:"triangle-left"})])}],g={render:l,staticRenderFns:u},p=g,w=i("VU/8"),m=s,v=w(d,p,!1,m,null,null),f=v.exports,b={name:"app",components:{myDialog:f}},x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},y=[],P={render:x,staticRenderFns:y},_=P,k=i("VU/8"),W=n,C=k(b,_,!1,W,null,null),S=C.exports,F=i("/ocq"),I={name:"powerline",props:[],data:function(){return{status:0,beforeStatus:0,clientWidth:0,progress:0,PowerIncrease:1,PowerIncreaseSpeed:1,PowerDecreaseTime:50,PowerDecreaseStep:.5,decreaseTimer:"",slowTimer:"",PowerIncreaseFactor:0}},computed:{circleDasharray:function(){return Math.round(this.PowerIncreaseFactor*(this.progress+65))+" 1069"}},created:function(){this.clientWidth=window.innerWidth,this.PowerIncreaseFactor=2*Math.PI*(.2*this.clientWidth-20)/100*210/360},mounted:function(){var t=this;this.$nextTick(function(){t.init()})},methods:{init:function(){this.swingPower()},swingPower:function(){this.progress=this.progress+this.PowerIncrease*this.PowerIncreaseSpeed,this.progress>=100?(this.PowerIncrease=-1,this.progress=100):this.progress<=0&&(this.PowerIncrease=1,this.progress=0),0===this.status&&window.requestAnimFrame(this.swingPower)},shot:function(){this.status=1,this.$emit("changeStatus",this.status),this.decreasePower()},decreasePower:function(){var t=this;clearTimeout(this.decreaseTimer),this.progress=this.progress-this.PowerDecreaseStep,this.$emit("returnSpeed",this.progress),this.progress<=0||(this.decreaseTimer=setTimeout(function(){t.decreasePower()},this.PowerDecreaseTime))},slowPowerDecrease:function(){var t=this;clearTimeout(this.slowTimer),this.PowerDecreaseStep=.25,this.slowTimer=setTimeout(function(){t.PowerDecreaseStep=.5},200)},switchOption:function(){if(2===this.status)return this.status=this.beforeStatus,0===this.beforeStatus?this.swingPower():"";this.beforeStatus=this.status,this.status=2},reset:function(){this.status=0,this.beforeStatus=0,this.progress=0,this.$emit("returnSpeed",this.progress),this.PowerIncrease=1,this.PowerIncreaseSpeed=1,this.PowerDecreaseTime=50,this.init()}}},T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"powerline"},[i("div",{staticClass:"outer-cycle"}),t._v(" "),i("div",{staticClass:"middle-cycle"}),t._v(" "),i("div",{staticClass:"inner-cycle"},[i("span",{staticClass:"inner-cycle-icon"}),i("br"),t._v(" "),i("span",{staticClass:"inner-cycle-line"}),i("br"),t._v(" "),i("span",{staticClass:"inner-cycle-text",on:{click:t.shot}},[t._v("点击滑行")])]),t._v(" "),i("svg",{staticClass:"my-svg",attrs:{width:.4*t.clientWidth,height:.4*t.clientWidth}},[i("circle",{attrs:{cx:.2*t.clientWidth,cy:.36*t.clientWidth,r:.2*t.clientWidth-20,"stroke-width":"15",stroke:"#fed744",fill:"none"}}),t._v(" "),i("circle",{staticClass:"inner-svg",attrs:{cx:.2*t.clientWidth,cy:.36*t.clientWidth,r:.2*t.clientWidth-20,"stroke-width":"15",stroke:"#fcfcfc",fill:"none","stroke-dasharray":t.circleDasharray}})])])},R=[],A={render:T,staticRenderFns:R},D=A,H=i("VU/8"),M=o,$=H(I,D,!1,M,null,null),O=$.exports,q=i("Zrlr"),E=i.n(q),X=i("wxAW"),B=i.n(X),L=function(){function t(e,i){E()(this,t),this.circles=[],this.max_radius="",this.context="",this.canvas="",this.circleOffsetX="left"===i?-8:8,this.circleOffsetY=-10,this.init(e)}return B()(t,[{key:"init",value:function(t){var e=this;1!==t.nodeType&&(t=document.querySelector(t));var i=document.createElement("canvas");this.canvas=i,this.context=i.getContext("2d"),i.width=t.offsetWidth,i.height=t.offsetHeight+10,window.devicePixelRatio&&(this.canvas.style.width=i.width+"px",this.canvas.style.height=i.height+"px",this.canvas.height=i.height*window.devicePixelRatio,this.canvas.width=i.width*window.devicePixelRatio,this.context.scale(window.devicePixelRatio,window.devicePixelRatio)),t.appendChild(i),t.addEventListener("click",function(t){var i=t.target||t.srcElement;"CANVAS"===i.tagName&&e.press(i)})}},{key:"press",value:function(t){this.max_radius=t.offsetWidth;var e={radius:0,centerX:t.offsetWidth/2+this.circleOffsetX,centerY:t.offsetHeight/2+this.circleOffsetY};this.circles.push(e),this.circles.length<=1&&this.draw()}},{key:"draw",value:function(){var t=this,e=this.context;e.clearRect(0,0,this.canvas.width,this.canvas.height);for(var i=this.circles.length;i--;){var s=this.circles[i];e.beginPath(),e.arc(s.centerX,s.centerY,s.radius,0,2*Math.PI,!1),e.strokeStyle="rgba(255, 255, 255, "+(100-s.radius/3*10)/100+")",e.lineWidth=2,e.stroke(),s.radius+=1,s.radius>30&&this.circles.splice(i,1)}this.circles.length>0?window.requestAnimFrame(function(){t.draw()}):e.clearRect(0,0,this.canvas.width,this.canvas.height)}}]),t}(),V=L,j={name:"btns",props:{side:{type:String,default:"left"}},mounted:function(){var t=this;this.$nextTick(function(){new V(t.$el,t.side)})},data:function(){return{}},methods:{}},N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"option-btn",class:t.side,on:{click:function(e){t.$emit("click")}}},[i("span",{staticClass:"option-btn-text"},[t._t("default")],2)])},U=[],Y={render:N,staticRenderFns:U},z=Y,J=i("VU/8"),G=h,Q=J(j,z,!1,G,null,null),Z=Q.exports,K=function(){function t(){E()(this,t),this.radius=50,this.R=70,this.posx=window.innerWidth/2,this.posy=window.innerHeight-window.innerWidth/2.5,this.begin=window.innerHeight-window.innerWidth/2.5,this.horSpeed=0,this.horAccSpeed=0,this.stop=!1,this.follower={}}return B()(t,[{key:"getFollowerPos",value:function(t,e){var i=Math.max(.5,e),s=Math.sqrt(t*t+i*i),n=i*this.R/s,o=t*this.R/s,h=i*(this.R+10)/s,a=t*(this.R+10)/s,r=this.posx-o,c=this.posy+n,d=this.posx-a,l=this.posy+h,u=function(t){return(r-d)/(l-c)*t+l-(r-d)/(l-c)*d};return{x:r,y:c,x1:d-5,y1:u(d-5),x2:d+5,y2:u(d+5)}}},{key:"reset",value:function(){this.posx=window.innerWidth/2,this.posy=window.innerHeight-window.innerWidth/2.5,this.stop=!0,this.horSpeed=0,this.horAccSpeed=0,this.follower={}}}]),t}(),tt=K,et=function(){function t(){E()(this,t),this.dir="",this.margin=60,this.width=60,this.height=this.width/2.25,this.posX=window.innerWidth/2-this.margin,this.decreaseFactor=-1,this.count=0,this.show=!1}return B()(t,[{key:"addCount",value:function(t){this.dir!==t&&(this.dir=t,this.count=0,this.posX="left"===this.dir?window.innerWidth/2-this.margin:window.innerWidth/2+this.margin,this.decreaseFactor=-1),this.count++}},{key:"updateSelf",value:function(){this.count?(this.show=!0,this.posX=this.posX+8*this.decreaseFactor,"left"===this.dir&&this.posX<window.innerWidth/2-this.margin-this.width/2?this.decreaseFactor=1:"left"===this.dir&&this.posX>window.innerWidth/2-this.margin+this.width/2?(this.decreaseFactor=-1,this.count--):"right"===this.dir&&this.posX<window.innerWidth/2+this.margin-this.width/2?this.decreaseFactor=1:"right"===this.dir&&this.posX>window.innerWidth/2+this.margin+this.width/2&&(this.decreaseFactor=-1,this.count--)):(this.show=!1,this.dir="")}}]),t}(),it=et,st=function(){function t(){E()(this,t),this.radio=5.87,this.width=70,this.height=this.width*this.radio,this.posArr=[{x:0,y:-this.height},{x:0,y:0},{x:0,y:this.height}],this.posArr2=[{x:0,y:-this.height},{x:0,y:0},{x:0,y:this.height}]}return B()(t,[{key:"updateSelf",value:function(){}}]),t}(),nt=st,ot={name:"world",components:{powerLine:O,optionBtn:Z},data:function(){return{beginMove:"",domain:"",topestDistance:-630,topest:-630,score:0,binghu:"",brush:"",bgWalk:0,roadWidth:100,speed:0,speedFactor:33,ratio:"",status:0,context:"",canvas:"",boxX:0,boxY:0,Width:"",Height:"",currentFrame:0,image:"",peopleImg1:"",peopleImg2:"",brushImage:"",meter:""}},created:function(){this.binghu=new tt,this.brush=new it,this.image=new Image,this.people=new nt,this.peopleImg1=new Image,this.peopleImg2=new Image,this.brushImage=new Image,this.meter=new Image,this.domain=location.port.indexOf("8888")<0?"/binghutiaozhan":"",this.image.src=this.domain+"/static/images/binghu.png",this.brushImage.src=this.domain+"/static/images/brush.png",this.peopleImg1.src=this.domain+"/static/images/people2.jpg",this.peopleImg2.src=this.domain+"/static/images/people.jpg",this.meter.src=this.domain+"/static/images/meter.jpg"},methods:{run:function(){2!==this.status&&(this.render(),window.requestAnimFrame(this.run))},shot:function(t){this.status=t,this.binghu.stop=!1},render:function(){this.context.clearRect(this.boxX,this.boxY,this.Width,this.Height),this.currentFrame++,this.drawBg(),this.drawFinal(),this.drawPeople(),this.drawHero(),this.drawBrush(),this.context.save(),this.context.restore(),this.score=(Math.abs(this.beginMove-this.topestDistance-this.bgWalk)/this.ratio).toFixed(1),this.judge()},drawBrush:function(){var t=this.brush;if(t.updateSelf(),this.brush.show){this.context.drawImage(this.brushImage,0,0,115,51,t.posX-t.width/2,300,t.width,t.height)}},drawFinal:function(){var t=this.context;this.binghu.stop&&(this.topest=this.topest+this.speed/this.speedFactor),t.beginPath(),t.strokeStyle="#f1db8d",t.lineWidth=10,t.arc(this.Width/2,this.topest,70,0,2*Math.PI),t.stroke(),t.beginPath(),t.strokeStyle="#84d0fd",t.lineWidth=10,t.arc(this.Width/2,this.topest,40,0,2*Math.PI),t.stroke(),t.beginPath(),t.fillStyle="#d63338",t.lineWidth=1,t.arc(this.Width/2,this.topest,10,0,2*Math.PI),t.fill()},drawPeople:function(){var t=this,e=this.context,i=this.people;i.posArr.forEach(function(s,n){t.binghu.stop&&(s.y=s.y+t.speed/t.speedFactor),s.y>=t.Height&&(s.y=-i.height-(t.Height-i.height)),e.drawImage(t.peopleImg1,0,0,141,828,s.x,s.y,i.width,i.height),e.drawImage(t.peopleImg2,0,0,141,828,t.Width-i.width,s.y,i.width,i.height)})},drawHero:function(){var t=this.context;t.save();var e=this.binghu;this.binghu.stop||(this.binghu.posy=-this.speed/this.speedFactor+this.binghu.posy,this.binghu.posy<this.beginMove&&(this.binghu.stop=!0)),this.binghu.horSpeed=this.binghu.horSpeed+this.binghu.horAccSpeed,this.binghu.horSpeed=this.binghu.horSpeed>.5?.5:this.binghu.horSpeed<-.5?-.5:this.binghu.horSpeed,this.binghu.posx=this.binghu.posx+this.binghu.horSpeed;var i=this.binghu.getFollowerPos(this.binghu.horSpeed,this.speed/this.speedFactor);t.drawImage(this.image,0,0,162,160,e.posx-e.R/1.5,e.posy-e.R/1.5,2*e.R/1.5,2*e.R/1.5),t.restore(),t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.closePath(),t.fillStyle="#d35155",t.fill()},drawBg:function(){this.binghu.stop&&(this.bgWalk=this.speed/this.speedFactor+this.bgWalk);var t=this.context;t.fillStyle="#ccc";var e=(this.Width-this.roadWidth)/2-38,i=this.beginMove,s=(i-this.topestDistance)/25;t.lineWidth=1,t.strokeStyle="#ccc",t.fillStyle="#ccc",t.beginPath(),t.drawImage(this.meter,0,0,334,1539,e,this.topestDistance+this.bgWalk+2*s,200,i-this.topestDistance-5*s),t.beginPath(),t.strokeStyle="#ccc",t.lineWidth=50,t.moveTo(this.people.width,0),t.lineTo(this.people.width,this.Height),t.closePath(),t.stroke(),t.beginPath(),t.strokeStyle="#ccc",t.lineWidth=30,t.moveTo(this.Width-this.people.width-10,0),t.lineTo(this.Width-this.people.width-10,this.Height),t.closePath(),t.stroke(),t.beginPath(),t.strokeStyle="#eee",t.lineWidth=10,t.moveTo(this.people.width+20,0),t.lineTo(this.people.width+20,this.Height),t.closePath(),t.stroke(),t.beginPath(),t.strokeStyle="#eee",t.lineWidth=10,t.moveTo(this.Width-this.people.width-20,0),t.lineTo(this.Width-this.people.width-20,this.Height),t.closePath(),t.stroke()},judge:function(){1===this.status&&this.speed<=0&&this.gameOver(),Math.abs(this.Width-2*this.binghu.posx)>this.roadWidth&&this.gameOver()},gameOver:function(){this.status=2,alert("离终点"+this.score+"米"),this.reStart()},reStart:function(){this.speed=0,this.binghu.reset(),this.status=0,this.bgWalk=0,this.topest=this.topestDistance,this.$refs.powerLine.reset()},handleDirect:function(t){1===this.status&&(this.$refs.powerLine.slowPowerDecrease(),this.binghu.horAccSpeed=t?"left"===t?-.05:.05:0,this.brush.addCount(t))},getJourney:function(t){1===this.status&&(this.speed=t)}},mounted:function(){var t=this;this.$nextTick(function(){t.Width=window.innerWidth,t.Height=window.innerHeight,t.beginMove=2/3*t.Height,t.ratio=(t.beginMove-t.topestDistance)/50;var e='<canvas id="canvas" width='+t.Width+"; height="+t.Height+">Sorry! you的浏览器不支持canvas</canvas>";document.getElementById("stage").innerHTML=e,t.canvas=document.getElementById("canvas"),t.context=t.canvas.getContext("2d"),window.devicePixelRatio&&(t.canvas.style.width=t.Width+"px",t.canvas.style.height=t.Height+"px",t.canvas.height=t.Height*window.devicePixelRatio,t.canvas.width=t.Width*window.devicePixelRatio,t.context.scale(window.devicePixelRatio,window.devicePixelRatio)),t.run()})}},ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{attrs:{id:"stage"}}),t._v(" "),i("div",{staticClass:"score-panel"},[i("div",{staticClass:"score-box"},[i("div",{staticClass:"box-item",staticStyle:{"border-bottom":"1px solid #ccc"}},[t._v("离靶心")]),t._v(" "),i("div",{staticClass:"box-item num"},[t._v(t._s(t.score)+"m")])]),t._v(" "),i("div",{staticClass:"ranking"},[t._v("排行榜")])]),t._v(" "),i("power-line",{ref:"powerLine",on:{returnSpeed:t.getJourney,changeStatus:t.shot}}),t._v(" "),i("option-btn",{on:{click:function(e){t.handleDirect("left")}}},[t._v("左扫冰")]),t._v(" "),i("option-btn",{attrs:{side:"right"},on:{click:function(e){t.handleDirect("right")}}},[t._v("右扫冰")])],1)},at=[],rt={render:ht,staticRenderFns:at},ct=rt,dt=i("VU/8"),lt=a,ut=dt(ot,ct,!1,lt,null,null),gt=ut.exports,pt={name:"app",components:{myDialog:f},data:function(){return{hasCheck:!1,seeRule:!1,seeProtocol:!1}},methods:{startGame:function(){if(!this.hasCheck)return void alert("请先阅读游戏声明");this.$router.push({name:"word"})}}},wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"start-page"},[i("div",{staticClass:"logo"},[i("img",{attrs:{src:t._f("autoPre")("/static/images/logo.png")}})]),t._v(" "),i("div",{staticClass:"game-rule",on:{click:function(e){t.seeRule=!0}}},[i("img",{attrs:{src:t._f("autoPre")("/static/images/rule.png")}})]),t._v(" "),i("div",{staticClass:"bg-box"},[i("img",{staticClass:"img-bg",attrs:{src:t._f("autoPre")("/static/images/homeBg.png")}})]),t._v(" "),i("div",{staticClass:"btn-field"},[i("span",{staticClass:"start-btn",on:{click:t.startGame}})]),t._v(" "),i("div",{staticClass:"game-protocol"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.hasCheck,expression:"hasCheck"}],staticClass:"game-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.hasCheck)?t._i(t.hasCheck,null)>-1:t.hasCheck},on:{change:function(e){var i=t.hasCheck,s=e.target,n=!!s.checked;if(Array.isArray(i)){var o=t._i(i,null);s.checked?o<0&&(t.hasCheck=i.concat([null])):o>-1&&(t.hasCheck=i.slice(0,o).concat(i.slice(o+1)))}else t.hasCheck=n}}}),t._v(" "),i("button",{staticClass:"game-protocol-btn",on:{click:function(e){t.seeProtocol=!0}}},[t._v("查看游戏声明")])]),t._v(" "),i("my-dialog",{attrs:{open:t.seeRule,height:"15"},on:{closeDialog:function(e){t.seeRule=!1}}},[i("img",{attrs:{slot:"title",src:t._f("autoPre")("/static/images/game_rule.png")},slot:"title"}),t._v("\n    1. 力度条不断变化，待力度合适时点击滑行，滑出冰壶"),i("br"),t._v("\n    2. 冰壶滑行过程中，力度会不断衰减，冰壶速度也越来越慢，左右扫冰可降低力度衰减速率，同时冰壶向对应方向偏离"),i("br"),t._v("\n    3. 当力度降至为零，冰壶停止运动，或者冰壶接触滑道两边时，游戏结束"),i("br"),t._v("\n    4. 游戏结束是冰壶离终点距离为最终分数，距离越近分数越高，所得积分也越高"),i("br"),t._v("\n    5. 玩家凭借积分可····\n  ")]),t._v(" "),i("my-dialog",{attrs:{open:t.seeProtocol,height:"2"},on:{closeDialog:function(e){t.seeProtocol=!1}}},[i("img",{attrs:{slot:"title",src:t._f("autoPre")("/static/images/shengming.png")},slot:"title"}),t._v("\n      1. 本次积分只在活动期间有效"),i("br"),t._v("\n      2. 活动方保留最终解释权\n  ")])],1)},mt=[],vt={render:wt,staticRenderFns:mt},ft=vt,bt=i("VU/8"),xt=r,yt=bt(pt,ft,!1,xt,null,null),Pt=yt.exports;c.a.use(F.a);var _t=new F.a({routes:[{path:"/",name:"start",component:Pt},{path:"/word",name:"word",component:gt}]});Date.now||(Date.now=function(){return(new Date).getTime()}),function(){for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var i=t[e];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var s=0;window.requestAnimationFrame=function(t){var e=Date.now(),i=Math.max(s+16,e);return setTimeout(function(){t(s=i)},i-e)},window.cancelAnimationFrame=clearTimeout}}(),window.requestAnimFrame=window.requestAnimationFrame,function(t,e){var i=t.documentElement,s="onorientationchange"in window?"orientationchange":"resize",n=function(){var t=i.clientWidth;t&&(i.style.fontSize=t/320*10+"px")};e.addEventListener(s,n,!1),t.addEventListener("DOMContentLoaded",n,!1)}(document,window),c.a.config.productionTip=!1,c.a.filter("autoPre",function(t){return location.port.indexOf("8888")<0?"/binghutiaozhan"+t+"?20171220":t}),new c.a({el:"#app",router:_t,template:"<App/>",components:{App:S}})},OSBH:function(t,e){},TnH1:function(t,e){},V1jW:function(t,e){},sI4q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f3241340d13dd5aedded.js.map